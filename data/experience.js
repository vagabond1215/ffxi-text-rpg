export const experienceTable = {
  "0": [
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200,
    200
  ],
  "1": [
    220,
    220,
    220,
    220,
    220,
    220,
    225,
    225,
    225,
    225,
    225,
    230,
    230,
    230,
    230,
    240,
    240,
    240,
    240,
    300
  ],
  "2": [
    240,
    240,
    240,
    240,
    240,
    240,
    250,
    250,
    250,
    250,
    250,
    260,
    260,
    260,
    260,
    280,
    280,
    280,
    280,
    400
  ],
  "3": [
    260,
    260,
    260,
    260,
    260,
    260,
    300,
    300,
    300,
    300,
    300,
    300,
    300,
    300,
    300,
    320,
    320,
    320,
    320,
    500
  ],
  "4": [
    310,
    310,
    310,
    310,
    310,
    310,
    300,
    300,
    300,
    310,
    280,
    280,
    280,
    280,
    260,
    260,
    240,
    240,
    240,
    600
  ],
  "5": [
    350,
    350,
    350,
    350,
    350,
    350,
    400,
    400,
    400,
    340,
    310,
    280,
    280,
    280,
    280,
    260,
    260,
    260,
    260,
    700
  ],
  "6": [
    450,
    450,
    450,
    450,
    450,
    450,
    450,
    450,
    450,
    400,
    370,
    330,
    320,
    320,
    320,
    300,
    300,
    300,
    300,
    800
  ],
  "7": [
    550,
    550,
    550,
    550,
    550,
    550,
    500,
    500,
    500,
    470,
    430,
    380,
    360,
    360,
    360,
    340,
    340,
    340,
    340,
    900
  ],
  "8": [
    600,
    600,
    600,
    600,
    600,
    600,
    550,
    550,
    550,
    530,
    480,
    430,
    400,
    400,
    400,
    380,
    380,
    380,
    380,
    1000
  ],
  "9": [
    720,
    720,
    720,
    720,
    720,
    720,
    600,
    600,
    600,
    600,
    530,
    480,
    440,
    440,
    440,
    400,
    400,
    400,
    400,
    1100
  ],
  "10": [
    580,
    580,
    580,
    580,
    580,
    580,
    530,
    530,
    530,
    530,
    530,
    530,
    480,
    480,
    480,
    480,
    480,
    480,
    480,
    1200
  ],
  "11": [
    630,
    630,
    630,
    630,
    630,
    630,
    580,
    580,
    580,
    580,
    580,
    580,
    530,
    530,
    530,
    530,
    530,
    530,
    530,
    1300
  ],
  "12": [
    720,
    720,
    720,
    720,
    720,
    720,
    630,
    630,
    630,
    630,
    630,
    630,
    580,
    580,
    580,
    580,
    580,
    580,
    580,
    1400
  ],
  "13": [
    800,
    800,
    800,
    800,
    800,
    800,
    720,
    720,
    720,
    720,
    720,
    720,
    630,
    630,
    630,
    630,
    630,
    630,
    630,
    1500
  ],
  "14": [
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    720,
    720,
    720,
    720,
    720,
    720,
    720,
    1500
  ],
  "15": [
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    800,
    1500
  ],
  "-1": [
    180,
    180,
    180,
    180,
    180,
    180,
    186,
    192,
    192,
    192,
    192,
    192,
    192,
    192,
    195,
    195,
    195,
    195,
    195,
    195
  ],
  "-2": [
    160,
    160,
    160,
    160,
    160,
    160,
    172,
    172,
    180,
    180,
    186,
    186,
    186,
    186,
    190,
    190,
    190,
    190,
    190,
    190
  ],
  "-3": [
    140,
    140,
    150,
    150,
    150,
    150,
    160,
    160,
    170,
    170,
    180,
    180,
    180,
    180,
    184,
    184,
    184,
    184,
    184,
    185
  ],
  "-4": [
    130,
    130,
    140,
    140,
    140,
    140,
    150,
    152,
    160,
    160,
    170,
    170,
    172,
    172,
    180,
    180,
    180,
    180,
    180,
    180
  ],
  "-5": [
    120,
    120,
    130,
    130,
    130,
    130,
    140,
    146,
    152,
    152,
    160,
    160,
    166,
    166,
    172,
    172,
    172,
    172,
    172,
    172
  ],
  "-6": [
    100,
    100,
    120,
    120,
    120,
    120,
    130,
    140,
    146,
    146,
    152,
    152,
    160,
    160,
    166,
    166,
    166,
    166,
    166,
    166
  ],
  "-7": [
    0,
    80,
    110,
    110,
    110,
    110,
    120,
    130,
    140,
    140,
    146,
    146,
    152,
    154,
    160,
    160,
    160,
    160,
    160,
    160
  ],
  "-8": [
    0,
    60,
    90,
    90,
    100,
    100,
    110,
    120,
    130,
    132,
    140,
    140,
    146,
    150,
    155,
    155,
    155,
    155,
    155,
    155
  ],
  "-9": [
    0,
    0,
    80,
    80,
    80,
    80,
    100,
    110,
    120,
    126,
    132,
    132,
    140,
    144,
    150,
    150,
    150,
    150,
    150,
    150
  ],
  "-10": [
    0,
    0,
    0,
    0,
    80,
    80,
    80,
    100,
    110,
    120,
    126,
    126,
    132,
    140,
    145,
    145,
    145,
    145,
    145,
    145
  ],
  "-11": [
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    80,
    100,
    110,
    120,
    120,
    126,
    132,
    140,
    140,
    140,
    140,
    140,
    140
  ],
  "-12": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    80,
    100,
    110,
    112,
    120,
    126,
    132,
    132,
    132,
    132,
    132,
    132
  ],
  "-13": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    80,
    100,
    106,
    112,
    120,
    126,
    126,
    126,
    126,
    126,
    126
  ],
  "-14": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    90,
    100,
    106,
    112,
    120,
    120,
    120,
    120,
    120,
    120
  ],
  "-15": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    80,
    90,
    100,
    106,
    112,
    112,
    112,
    112,
    112,
    112
  ],
  "-16": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    80,
    80,
    100,
    106,
    106,
    106,
    106,
    106,
    106
  ],
  "-17": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    80,
    100,
    100,
    100,
    100,
    100,
    100
  ],
  "-18": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    90,
    90,
    90,
    90,
    90,
    90
  ],
  "-19": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    80,
    80,
    80,
    80,
    80,
    80
  ],
  "-20": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    70,
    70,
    70,
    70,
    70
  ],
  "-21": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    60,
    60,
    60,
    60,
    60
  ],
  "-22": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    55,
    55,
    55,
    55,
    55
  ],
  "-23": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    50,
    50,
    50,
    50,
    50
  ],
  "-24": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    48,
    48,
    48,
    48,
    48
  ],
  "-25": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    45,
    45,
    45,
    45,
    45
  ],
  "-26": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    42,
    42,
    42,
    42,
    42
  ],
  "-27": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    40,
    40,
    40,
    40,
    40
  ],
  "-28": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    38,
    38,
    38,
    38,
    38
  ],
  "-29": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    36,
    36,
    36,
    36,
    36
  ],
  "-30": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    34,
    34,
    34,
    34,
    34
  ],
  "-31": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    32,
    32,
    32,
    32,
    32
  ],
  "-32": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    30,
    30,
    30,
    30,
    30
  ],
  "-33": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    28,
    28,
    28,
    28,
    28
  ],
  "-34": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    26,
    26,
    26,
    26,
    26
  ],
  "-35": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    24,
    24,
    24,
    24,
    24
  ],
  "-36": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    22,
    22,
    22,
    22,
    22
  ],
  "-37": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    20,
    20,
    20,
    20
  ],
  "-38": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    19,
    19,
    19,
    19,
    19
  ],
  "-39": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    18,
    18,
    18,
    18,
    18
  ],
  "-40": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    17,
    17,
    17,
    17,
    17
  ],
  "-41": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    16,
    16,
    16,
    16,
    16
  ],
  "-42": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    15,
    15,
    15,
    15,
    15
  ],
  "-43": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    14,
    14,
    14,
    14,
    14
  ],
  "-44": [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0
  ]
};

export function experienceForKill(playerLevel, monsterLevel) {
  const diff = monsterLevel - playerLevel;
  if (diff <= -8) return 0;
  if (diff >= 6) return 250;
  const table = {
    [-7]: 12,
    [-6]: 20,
    [-5]: 30,
    [-4]: 40,
    [-3]: 60,
    [-2]: 80,
    [-1]: 95,
    0: 100,
    1: 130,
    2: 150,
    3: 170,
    4: 190,
    5: 220
  };
  return table[diff] || 0;
}

export const levelTNL = [
  500, 750, 1000, 1250, 1500, 1750, 2000, 2200, 2400, 2600,
  2800, 3000, 3200, 3400, 3600, 3800, 4000, 4200, 4400, 4600,
  4800, 5000, 5100, 5200, 5300, 5400, 5500, 5600, 5700, 5800,
  5900, 6000, 6100, 6200, 6300, 6400, 6500, 6600, 6700, 6800,
  6900, 7000, 7100, 7200, 7300, 7400, 7500, 7600, 7700, 7800,
  8000, 9200, 10400, 11600, 12800, 14000, 15200, 16400, 17600, 18800,
  20000, 21500, 23000, 24500, 26000, 27500, 29000, 30500, 32000, 34000,
  36000, 38000, 40000, 42000, 44000, 44500, 45000, 45500, 46000, 46500,
  47000, 47500, 48000, 48500, 49000, 49500, 50000, 50500, 51000, 51500,
  52000, 52500, 53000, 53500, 54000, 54500, 55000, 55500, 56000
];

export const expToLevel = (() => {
  const table = { 1: 0 };
  let total = 0;
  levelTNL.forEach((tnl, i) => {
    total += tnl;
    table[i + 2] = total;
  });
  return table;
})();

export function expNeeded(character, jobName = character.job) {
  const level = jobName === character.job
    ? character.level
    : character.jobs?.[jobName] || 1;
  const next = expToLevel[level + 1];
  if (next === undefined) return 0;
  const current = character.jobExp?.[jobName] || 0;
  return Math.max(next - current, 0);
}
